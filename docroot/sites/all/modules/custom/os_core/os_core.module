<?php
/**
 * @file
 * Code for the OS core functionality.
 */
/**
 * Implements hook_install().
 * Here we will create two bean objects of generic_block bean type.
 *
 **/
function os_core_install() {

  $bean = bean_create(array('type' => 'generic_block'));
  $bean->label = 'Copyright Block';
  $bean->title = '<none>';
  $bean->delta = 'copyrigt-block';
  $bean->field_body['und'][0] = array(
    'value' => '<p>For more discussion on open source and the role of the CIO in the enterprise, join us at <a href="http://enterprisersproject.com">The EnterprisersProject.com</a>

      The opinions expressed on this website are those of each author, not of the author\'s employer or of Red Hat.

      opensource.com aspires to publish all content under a <a href="http://creativecommons.org/licenses/">Creative Commons license</a> but may not be able to do so in all cases. You are responsible for ensuring that you have the necessary permission to reuse any work on this site. Red Hat and the Shadowman logo are trademarks of Red Hat, Inc., registered in the United States and other countries.</p>',
    'format' => 'panopoly_wysiwyg_text' );
  $bean->save();



  $bean = bean_create(array('type' => 'generic_block'));
  $bean->label = 'Find us on Social Media';
  $bean->title = '<none>';
  $bean->delta = 'social-media';
  $bean->field_body['und'][0] = array(
    'value' => '<p><span class="find-us-text">Find us:</span> <a class="footer-identica" title="identi.ca" href="http://identi.ca/opensourceway">identi.ca</a> <a class="footer-youtube" title="Youtube" href="http://www.youtube.com/opensourceway">Youtube</a> <a class="footer-flickr" title="Flickr" href="http://www.flickr.com/photos/opensourceway">Flickr</a> <a class="footer-gplus" title="Google Plus" href="https://plus.google.com/108750398488318674353">Google Plus</a> <a class="footer-facebook" title="Facebook" href="http://www.facebook.com/pages/opensourcecom/162962298056">Facebook</a> <a class="footer-twitter" title="Twitter" href="https://twitter.com/OpenSourceWay">Twitter</a></p>',
    'format' => 'panopoly_wysiwyg_text' );
  $bean->save();

  block_flush_caches();
  db_update('block')
    ->fields(array(
      'status' => 1,
      'weight' => -10,
      'region' => 'navigation_top',
      'title' => '<none>',
    ))
    ->condition('module', 'menu')
    ->condition('delta', 'menu-about-menu')
    ->condition('theme', 'opensource')
    ->execute();

  db_update('block')
    ->fields(array(
      'status' => 1,
      'weight' => 0,
      'region' => 'footer',
      'title' => '<none>',
    ))
    ->condition('module', 'menu')
    ->condition('delta', 'menu-footer')
    ->condition('theme', 'opensource')
    ->execute();

  db_update('block')
    ->fields(array(
      'status' => 1,
      'weight' => -12,
      'region' => 'footer',
    ))
    ->condition('module', 'bean')
    ->condition('delta', 'copyrigt-block')
    ->condition('theme', 'opensource')
    ->execute();

  block_flush_caches();
  db_update('block')
    ->fields(array(
      'status' => 1,
      'weight' => 10,
      'region' => 'footer',
    ))
    ->condition('module', 'bean')
    ->condition('delta', 'social-media')
    ->condition('theme', 'opensource')
    ->execute();
}
